# icarus simulation with Makefile commands
This example shows how to automate the simulation process of verilog files with Makefiles

In a terminal you can simply type the following: 

```bash
make all # build the simulation executable *.vpp
make test # This commands runs the simulation automatically
make wave # opens the waveforms using GTKWave
make clean # clean all gerated files from the directory
```

Please refer to the [Makefile](./Makefile) file for the implementation details. 

Plese refer to [Makefile.md](../../../../Computer-Architecture/1-GNU-tools-intro/Makefile.md) for additional information regarding the usage of make and makefiles.

## Basic Intro to Icarus simulation

Icarus Verilog is a Verilog HDL compiler and simulator. Its usage primarily involves two main commands: iverilog for compilation and vvp for simulation.

### 1. iverilog (Compiler Command):
This command compiles your Verilog source files into an intermediate format, typically a .vvp file, which is then executed by the vvp runtime engine. Basic Compilation.


```bash 
iverilog -o <output_filename>.vvp <source_file1>.v <source_file2>.v ...
```

`-o <output_filename>.vvp`: Specifies the name of the compiled output file.

`<source_file>.v`: Your Verilog source code files.

#### Common Flags:
`-c <cmdfile>`: Specifies a command file containing compilation options.

`-D <macro_name>[=<value>]`: Defines a macro, similar to #define in C.

`-g <generation_flag>`: Specifies the Verilog language standard or extensions to use (e.g., `-g2005-sv` for SystemVerilog features).

`-I <path>`: Adds a directory to the include file search path.

`-M <mode>=<path>`: Sets a specific mode for VPI (Verilog Procedural Interface) modules.

`-m <module>`: Loads a VPI module.

`-y <library_path>`: Specifies a library directory to search for modules.

`-Wall`: Enables all warnings during compilation.

### 2. vvp (Simulator Command):
This command executes the compiled .vvp file generated by iverilog to run the simulation. Basic Simulation.

```bash
vvp <compiled_filename>.vvp
```

`<compiled_filename>.vvp`: The output file from iverilog.

#### Common Flags:
`+<plus_arg>`: Passes extended arguments to the simulation, accessible through $test$plusargs and $value$plusargs system functions in your Verilog code.

`-lxt2, -fst, etc.`: Specifies the waveform dumping format (e.g., for use with GTKWave).

`-o <dump_filename>.vcd`: Specifies the output file for waveform dumps (e.g., VCD format).

## Example Workflow:
Write your Verilog code: Create a file like my_design.v and my_testbench.v.

Compile:
```bash
iverilog -o my_simulation.vvp my_design.v my_testbench.v
```
Simulate and generate waveform.
```bash
vvp -lxt2 -o my_waveform.vcd my_simulation.vvp
```
View waveform (e.g., with GTKWave):

```bash
gtkwave my_waveform.vcd
```

Note: For more information about the usage of iverilog you can check this link https://steveicarus.github.io/iverilog/ 



